<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
    <div class="col-6">
        <a th:href="@{/vote/list?type=list}"
           class="btn btn-primary vote-button">
            목록</a>
    </div>
    <div class="flex justify-center my-8 vote-box">
        <div class="card justify-center w-10/12 bg-base-100 shadow-xl bg-white border">
            <div class="card-body mx-auto p-4">
                <div class="schedule-alphabet break-all vote-detail-title-font" style="text-align: center"
                     th:text="${vote.getTitle()}"></div>
                <br/><br/>
                <div class="schedule-alphabet break-all vote-detail-content-font" th:text="${vote.getContent()}"></div>
                <br/><br/>
                <div class="card-body mx-auto p-4 border bg-gray-100 datesize"
                     style="border-radius: 10px;">
                    <div class="schedule-alphabet"
                         th:text="'게시일 : '+${#temporals.format(vote.createDate, 'yyyy-MM-dd HH:mm')}"></div>
                    <br/>
                    <div class="schedule-alphabet" th:text="'투표 시작일 : '+${vote.getStartDate()}"></div>
                    <div class="schedule-alphabet" th:text="'투표 마감일 : '+${vote.getEndDate()}"></div>
                </div>
                <div th:with="today=${today}, startDay=${vote.getStartDate()}, EndDay=${vote.getEndDate()}">
                    <!-- 날짜 비교 -->
                    <div class="warning" th:if="${today.isBefore(startDay) or today.isAfter(EndDay)}">
                        <p>투표 기간이 아닙니다.</p>
                    </div>
                    <div th:unless="${today.isBefore(startDay) or today.isAfter(EndDay)}">
                        <div class="warning" th:if="${vote.isVoted(loginUser.getId())}">
                            <p>이미 투표에 참여햐셨습니다.</p>
                        </div>
                        <div th:unless="${vote.isVoted(loginUser.getId())}">
                            <div class="my-3" style="text-align: center">
                                <button type="button"
                                        class="button-box text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-gray-600 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-800"
                                        th:onclick="|if(confirm('투표하시면 취소할 수 없습니다. \n정말로 찬성하시겠습니까?')){location.href='@{/vote/agree/{id}(id=${vote.Id})}'}|">
                                    찬성
                                </button>
                                <button type="button"
                                        class="button-box text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-gray-600 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-800"
                                        th:onclick="|if(confirm('투표하시면 취소할 수 없습니다. \n정말로 반대하시겠습니까?')){location.href='@{/vote/disagree/{id}(id=${vote.Id})}'}|">
                                    반대
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>
</html>
